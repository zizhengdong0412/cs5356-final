/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/client-auth/[...action]/route";
exports.ids = ["app/api/client-auth/[...action]/route"];
exports.modules = {

/***/ "./action-async-storage.external?8dda":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "./request-async-storage.external?3d59":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "./static-generation-async-storage.external?16bc":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "perf_hooks":
/*!*****************************!*\
  !*** external "perf_hooks" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("perf_hooks");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?f4ce":
/*!****************************!*\
  !*** nodemailer (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclient-auth%2F%5B...action%5D%2Froute&page=%2Fapi%2Fclient-auth%2F%5B...action%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclient-auth%2F%5B...action%5D%2Froute.ts&appDir=%2FUsers%2Fzizhengdong%2FDocuments%2FGitHub%2Fcs5356-final%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fzizhengdong%2FDocuments%2FGitHub%2Fcs5356-final&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclient-auth%2F%5B...action%5D%2Froute&page=%2Fapi%2Fclient-auth%2F%5B...action%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclient-auth%2F%5B...action%5D%2Froute.ts&appDir=%2FUsers%2Fzizhengdong%2FDocuments%2FGitHub%2Fcs5356-final%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fzizhengdong%2FDocuments%2FGitHub%2Fcs5356-final&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_zizhengdong_Documents_GitHub_cs5356_final_src_app_api_client_auth_action_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/client-auth/[...action]/route.ts */ \"(rsc)/./src/app/api/client-auth/[...action]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/client-auth/[...action]/route\",\n        pathname: \"/api/client-auth/[...action]\",\n        filename: \"route\",\n        bundlePath: \"app/api/client-auth/[...action]/route\"\n    },\n    resolvedPagePath: \"/Users/zizhengdong/Documents/GitHub/cs5356-final/src/app/api/client-auth/[...action]/route.ts\",\n    nextConfigOutput,\n    userland: _Users_zizhengdong_Documents_GitHub_cs5356_final_src_app_api_client_auth_action_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/client-auth/[...action]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjbGllbnQtYXV0aCUyRiU1Qi4uLmFjdGlvbiU1RCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGY2xpZW50LWF1dGglMkYlNUIuLi5hY3Rpb24lNUQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZjbGllbnQtYXV0aCUyRiU1Qi4uLmFjdGlvbiU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnppemhlbmdkb25nJTJGRG9jdW1lbnRzJTJGR2l0SHViJTJGY3M1MzU2LWZpbmFsJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnppemhlbmdkb25nJTJGRG9jdW1lbnRzJTJGR2l0SHViJTJGY3M1MzU2LWZpbmFsJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzZDO0FBQzFIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVjaXBlLWtlZXBlci8/MDNjZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMveml6aGVuZ2RvbmcvRG9jdW1lbnRzL0dpdEh1Yi9jczUzNTYtZmluYWwvc3JjL2FwcC9hcGkvY2xpZW50LWF1dGgvWy4uLmFjdGlvbl0vcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NsaWVudC1hdXRoL1suLi5hY3Rpb25dL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2xpZW50LWF1dGgvWy4uLmFjdGlvbl1cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NsaWVudC1hdXRoL1suLi5hY3Rpb25dL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3ppemhlbmdkb25nL0RvY3VtZW50cy9HaXRIdWIvY3M1MzU2LWZpbmFsL3NyYy9hcHAvYXBpL2NsaWVudC1hdXRoL1suLi5hY3Rpb25dL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2NsaWVudC1hdXRoL1suLi5hY3Rpb25dL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclient-auth%2F%5B...action%5D%2Froute&page=%2Fapi%2Fclient-auth%2F%5B...action%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclient-auth%2F%5B...action%5D%2Froute.ts&appDir=%2FUsers%2Fzizhengdong%2FDocuments%2FGitHub%2Fcs5356-final%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fzizhengdong%2FDocuments%2FGitHub%2Fcs5356-final&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/client-auth/[...action]/route.ts":
/*!******************************************************!*\
  !*** ./src/app/api/client-auth/[...action]/route.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_server_auth_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/server-auth-helper */ \"(rsc)/./src/lib/server-auth-helper.ts\");\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/sql.js\");\n\n\n\n\n\n\n\n// Session handler for both GET and POST\nasync function handleSession() {\n    try {\n        // Use our server-side session validator\n        const { isAuthenticated, user } = await (0,_lib_server_auth_helper__WEBPACK_IMPORTED_MODULE_1__.validateSessionFromCookie)();\n        if (isAuthenticated && user) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n                success: true,\n                user: {\n                    id: user.id,\n                    email: user.email || \"\",\n                    name: user.name || null,\n                    image: user.image || null\n                }\n            });\n        }\n        // Check for session in cookies as a fallback\n        const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_3__.cookies)();\n        const sessionCookie = cookieStore.get(\"better-auth.session_token\");\n        if (sessionCookie?.value && \"development\" === \"development\") {\n            console.log(\"Session cookie exists, but no valid session found in database.\");\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n            success: true,\n            user: null\n        });\n    } catch (error) {\n        console.error(\"Error getting session:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n            success: false,\n            user: null\n        });\n    }\n}\n// Helper to create a session cookie and store in database\nasync function createSessionCookie(user) {\n    if (!user || !user.id) return null;\n    // Generate a session ID and signature\n    const sessionId = crypto__WEBPACK_IMPORTED_MODULE_4___default().randomUUID();\n    const signature = crypto__WEBPACK_IMPORTED_MODULE_4___default().createHash(\"sha256\").update(`${sessionId}:${user.id}`).digest(\"hex\");\n    // Create a session token in the format expected: [id].[signature]\n    const sessionToken = `${sessionId}.${signature}`;\n    const expiryDate = new Date();\n    expiryDate.setDate(expiryDate.getDate() + 30);\n    console.log(\"********* CREATING SESSION IN DATABASE *********\");\n    console.log(\"Session ID:\", sessionId, \"User ID:\", user.id);\n    try {\n        // Store the session in the database\n        await _lib_db__WEBPACK_IMPORTED_MODULE_5__.db.execute(drizzle_orm__WEBPACK_IMPORTED_MODULE_6__.sql`\n      INSERT INTO sessions (id, user_id, expires_at)\n      VALUES (${sessionId}, ${user.id}, ${expiryDate.toISOString()})\n    `);\n        console.log(\"********* SESSION STORED SUCCESSFULLY *********\");\n        if (true) {\n            console.log(\"Session stored in database for user:\", user.email);\n        }\n    } catch (error) {\n        console.error(\"Error storing session in database:\", error);\n        console.error(error);\n    }\n    // Set the cookie\n    (0,next_headers__WEBPACK_IMPORTED_MODULE_3__.cookies)().set({\n        name: \"better-auth.session_token\",\n        value: sessionToken,\n        expires: expiryDate,\n        path: \"/\",\n        httpOnly: true,\n        secure: \"development\" === \"production\",\n        sameSite: \"lax\"\n    });\n    if (true) {\n        console.log(\"Set session cookie for user:\", user.email);\n    }\n    return sessionToken;\n}\nasync function GET(request, { params }) {\n    const actionPath = params.action || [];\n    const action = actionPath[0] || \"\";\n    // Log the request in development\n    if (true) {\n        console.log(\"GET client auth request:\", {\n            action,\n            path: request.nextUrl.pathname\n        });\n    }\n    // Handle session requests\n    if (action === \"session\" || action === \"get-session\") {\n        return handleSession();\n    }\n    // Default response for any other GET requests\n    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n        success: true\n    });\n}\nasync function POST(request, { params }) {\n    // Get the first part of the action path (sign-in, sign-up, etc.)\n    const actionPath = params.action || [];\n    const action = actionPath[0] || \"\";\n    const subAction = actionPath[1] || \"\"; // This might be 'email' in /api/client-auth/sign-in/email\n    // Log in development mode\n    if (true) {\n        console.log(\"POST client auth request:\", {\n            action,\n            subAction,\n            path: request.nextUrl.pathname\n        });\n    }\n    try {\n        // Get the request body\n        const body = await request.json();\n        // Handle session requests via POST\n        if (action === \"session\" || action === \"get-session\") {\n            return handleSession();\n        }\n        // Handle sign-in action (regardless of subAction like \"email\")\n        if (action === \"sign-in\" || action === \"signin\") {\n            const { email, password } = body || {};\n            console.log(\"Sign-up body received:\", body);\n            if (!email || !password) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n                    error: \"Email and password are required\"\n                }, {\n                    status: 400\n                });\n            }\n            console.log(\"Attempting to sign in user:\", email);\n            const user = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_0__.SignInUser)(email, password);\n            if (!user) {\n                console.log(\"Sign-in failed for:\", email);\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n                    error: \"Invalid credentials\"\n                }, {\n                    status: 401\n                });\n            }\n            console.log(\"User successfully signed in:\", user.email);\n            // Create a session cookie\n            try {\n                await createSessionCookie(user);\n                console.log(\"Session cookie created for user:\", user.email);\n            } catch (cookieError) {\n                console.error(\"Error creating session cookie:\", cookieError);\n            }\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n                user\n            });\n        }\n        // Handle sign-up action \n        if (action === \"sign-up\" || action === \"signup\") {\n            const { email, password, name } = body || {};\n            if (!email || !password) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n                    error: \"Email and password are required\"\n                }, {\n                    status: 400\n                });\n            }\n            const user = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_0__.SignUpUser)(email, password, name);\n            if (!user) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n                    error: \"Registration failed. User may already exist.\"\n                }, {\n                    status: 400\n                });\n            }\n            // Create a session cookie on sign-up too\n            await createSessionCookie(user);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n                user\n            });\n        }\n        // Handle signout\n        if (action === \"signout\" || action === \"sign-out\") {\n            // Clear session cookie\n            (0,next_headers__WEBPACK_IMPORTED_MODULE_3__.cookies)().set({\n                name: \"better-auth.session_token\",\n                value: \"\",\n                expires: new Date(0),\n                path: \"/\"\n            });\n            // Log in development\n            if (true) {\n                console.log(\"User signed out - session cookie cleared\");\n            }\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n                success: true\n            });\n        }\n        // Unknown action\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n            error: `Unknown action: ${action}/${subAction}`\n        }, {\n            status: 400\n        });\n    } catch (error) {\n        console.error(\"Client auth error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9jbGllbnQtYXV0aC9bLi4uYWN0aW9uXS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQW9EO0FBQ2lCO0FBQ2I7QUFDakI7QUFDWDtBQUNFO0FBRUk7QUFFbEMsd0NBQXdDO0FBQ3hDLGVBQWVRO0lBQ2IsSUFBSTtRQUNGLHdDQUF3QztRQUN4QyxNQUFNLEVBQUVDLGVBQWUsRUFBRUMsSUFBSSxFQUFFLEdBQUcsTUFBTVIsa0ZBQXlCQTtRQUVqRSxJQUFJTyxtQkFBbUJDLE1BQU07WUFDM0IsT0FBT1Asa0ZBQVlBLENBQUNRLElBQUksQ0FBQztnQkFDdkJDLFNBQVM7Z0JBQ1RGLE1BQU07b0JBQ0pHLElBQUlILEtBQUtHLEVBQUU7b0JBQ1hDLE9BQU9KLEtBQUtJLEtBQUssSUFBSTtvQkFDckJDLE1BQU1MLEtBQUtLLElBQUksSUFBSTtvQkFDbkJDLE9BQU9OLEtBQUtNLEtBQUssSUFBSTtnQkFDdkI7WUFDRjtRQUNGO1FBRUEsNkNBQTZDO1FBQzdDLE1BQU1DLGNBQWNiLHFEQUFPQTtRQUMzQixNQUFNYyxnQkFBZ0JELFlBQVlFLEdBQUcsQ0FBQztRQUV0QyxJQUFJRCxlQUFlRSxTQUFTQyxrQkFBeUIsZUFBZTtZQUNsRUMsUUFBUUMsR0FBRyxDQUFDO1FBQ2Q7UUFFQSxPQUFPcEIsa0ZBQVlBLENBQUNRLElBQUksQ0FBQztZQUFFQyxTQUFTO1lBQU1GLE1BQU07UUFBSztJQUN2RCxFQUFFLE9BQU9jLE9BQU87UUFDZEYsUUFBUUUsS0FBSyxDQUFDLDBCQUEwQkE7UUFDeEMsT0FBT3JCLGtGQUFZQSxDQUFDUSxJQUFJLENBQUM7WUFBRUMsU0FBUztZQUFPRixNQUFNO1FBQUs7SUFDeEQ7QUFDRjtBQUVBLDBEQUEwRDtBQUMxRCxlQUFlZSxvQkFBb0JmLElBQXlEO0lBQzFGLElBQUksQ0FBQ0EsUUFBUSxDQUFDQSxLQUFLRyxFQUFFLEVBQUUsT0FBTztJQUU5QixzQ0FBc0M7SUFDdEMsTUFBTWEsWUFBWXJC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RS9DLElBQUksQ0FBQ0wsTUFBTTtnQkFDVCxPQUFPUCxrRkFBWUEsQ0FBQ1EsSUFBSSxDQUN0QjtvQkFBRWEsT0FBTztnQkFBK0MsR0FDeEQ7b0JBQUVnQyxRQUFRO2dCQUFJO1lBRWxCO1lBRUEseUNBQXlDO1lBQ3pDLE1BQU0vQixvQkFBb0JmO1lBRTFCLE9BQU9QLGtGQUFZQSxDQUFDUSxJQUFJLENBQUM7Z0JBQ3ZCRDtZQUVGO1FBQ0Y7UUFFQSxpQkFBaUI7UUFDakIsSUFBSXVDLFdBQVcsYUFBYUEsV0FBVyxZQUFZO1lBQ2pELHVCQUF1QjtZQUN2QjdDLHFEQUFPQSxHQUFHbUMsR0FBRyxDQUFDO2dCQUNaeEIsTUFBTTtnQkFDTkssT0FBTztnQkFDUG9CLFNBQVMsSUFBSU4sS0FBSztnQkFDbEJPLE1BQU07WUFDUjtZQUVBLHFCQUFxQjtZQUNyQixJQUFJcEIsSUFBeUIsRUFBZTtnQkFDMUNDLFFBQVFDLEdBQUcsQ0FBQztZQUNkO1lBRUEsT0FBT3BCLGtGQUFZQSxDQUFDUSxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7WUFBSztRQUMzQztRQUVBLGlCQUFpQjtRQUNqQixPQUFPVCxrRkFBWUEsQ0FBQ1EsSUFBSSxDQUN0QjtZQUFFYSxPQUFPLENBQUMsZ0JBQWdCLEVBQUV5QixPQUFPLENBQUMsRUFBRUksVUFBVSxDQUFDO1FBQUMsR0FDbEQ7WUFBRUcsUUFBUTtRQUFJO0lBRWxCLEVBQUUsT0FBT2hDLE9BQU87UUFDZEYsUUFBUUUsS0FBSyxDQUFDLHNCQUFzQkE7UUFDcEMsT0FBT3JCLGtGQUFZQSxDQUFDUSxJQUFJLENBQ3RCO1lBQUVhLE9BQU87UUFBd0IsR0FDakM7WUFBRWdDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVjaXBlLWtlZXBlci8uL3NyYy9hcHAvYXBpL2NsaWVudC1hdXRoL1suLi5hY3Rpb25dL3JvdXRlLnRzPzFkNDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2lnbkluVXNlciwgU2lnblVwVXNlciB9IGZyb20gJ0AvbGliL2F1dGgnO1xuaW1wb3J0IHsgdmFsaWRhdGVTZXNzaW9uRnJvbUNvb2tpZSB9IGZyb20gJ0AvbGliL3NlcnZlci1hdXRoLWhlbHBlcic7XG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XG5pbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0byc7XG5pbXBvcnQgeyBkYiB9IGZyb20gJ0AvbGliL2RiJztcbmltcG9ydCB7IHNlc3Npb25zIH0gZnJvbSAnQC9saWIvc2NoZW1hJztcbmltcG9ydCB7IHNxbCB9IGZyb20gJ2RyaXp6bGUtb3JtJztcblxuLy8gU2Vzc2lvbiBoYW5kbGVyIGZvciBib3RoIEdFVCBhbmQgUE9TVFxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlU2Vzc2lvbigpIHtcbiAgdHJ5IHtcbiAgICAvLyBVc2Ugb3VyIHNlcnZlci1zaWRlIHNlc3Npb24gdmFsaWRhdG9yXG4gICAgY29uc3QgeyBpc0F1dGhlbnRpY2F0ZWQsIHVzZXIgfSA9IGF3YWl0IHZhbGlkYXRlU2Vzc2lvbkZyb21Db29raWUoKTtcbiAgICBcbiAgICBpZiAoaXNBdXRoZW50aWNhdGVkICYmIHVzZXIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCB8fCAnJyxcbiAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUgfHwgbnVsbCxcbiAgICAgICAgICBpbWFnZTogdXNlci5pbWFnZSB8fCBudWxsLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIHNlc3Npb24gaW4gY29va2llcyBhcyBhIGZhbGxiYWNrXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBjb29raWVzKCk7XG4gICAgY29uc3Qgc2Vzc2lvbkNvb2tpZSA9IGNvb2tpZVN0b3JlLmdldCgnYmV0dGVyLWF1dGguc2Vzc2lvbl90b2tlbicpO1xuICAgIFxuICAgIGlmIChzZXNzaW9uQ29va2llPy52YWx1ZSAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgY29uc29sZS5sb2coJ1Nlc3Npb24gY29va2llIGV4aXN0cywgYnV0IG5vIHZhbGlkIHNlc3Npb24gZm91bmQgaW4gZGF0YWJhc2UuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgdXNlcjogbnVsbCB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHNlc3Npb246JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCB1c2VyOiBudWxsIH0pO1xuICB9XG59XG5cbi8vIEhlbHBlciB0byBjcmVhdGUgYSBzZXNzaW9uIGNvb2tpZSBhbmQgc3RvcmUgaW4gZGF0YWJhc2VcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVNlc3Npb25Db29raWUodXNlcjogeyBpZDogc3RyaW5nOyBlbWFpbDogc3RyaW5nOyBuYW1lPzogc3RyaW5nIHwgbnVsbCB9KSB7XG4gIGlmICghdXNlciB8fCAhdXNlci5pZCkgcmV0dXJuIG51bGw7XG4gIFxuICAvLyBHZW5lcmF0ZSBhIHNlc3Npb24gSUQgYW5kIHNpZ25hdHVyZVxuICBjb25zdCBzZXNzaW9uSWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuICBjb25zdCBzaWduYXR1cmUgPSBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGAke3Nlc3Npb25JZH06JHt1c2VyLmlkfWApLmRpZ2VzdCgnaGV4Jyk7XG4gIFxuICAvLyBDcmVhdGUgYSBzZXNzaW9uIHRva2VuIGluIHRoZSBmb3JtYXQgZXhwZWN0ZWQ6IFtpZF0uW3NpZ25hdHVyZV1cbiAgY29uc3Qgc2Vzc2lvblRva2VuID0gYCR7c2Vzc2lvbklkfS4ke3NpZ25hdHVyZX1gO1xuXG4gIGNvbnN0IGV4cGlyeURhdGUgPSBuZXcgRGF0ZSgpO1xuICBleHBpcnlEYXRlLnNldERhdGUoZXhwaXJ5RGF0ZS5nZXREYXRlKCkgKyAzMCk7XG4gIFxuICBjb25zb2xlLmxvZygnKioqKioqKioqIENSRUFUSU5HIFNFU1NJT04gSU4gREFUQUJBU0UgKioqKioqKioqJyk7XG4gIGNvbnNvbGUubG9nKCdTZXNzaW9uIElEOicsIHNlc3Npb25JZCwgJ1VzZXIgSUQ6JywgdXNlci5pZCk7XG4gIFxuICB0cnkge1xuICAgIC8vIFN0b3JlIHRoZSBzZXNzaW9uIGluIHRoZSBkYXRhYmFzZVxuICAgIGF3YWl0IGRiLmV4ZWN1dGUoc3FsYFxuICAgICAgSU5TRVJUIElOVE8gc2Vzc2lvbnMgKGlkLCB1c2VyX2lkLCBleHBpcmVzX2F0KVxuICAgICAgVkFMVUVTICgke3Nlc3Npb25JZH0sICR7dXNlci5pZH0sICR7ZXhwaXJ5RGF0ZS50b0lTT1N0cmluZygpfSlcbiAgICBgKTtcblxuICAgIGNvbnNvbGUubG9nKCcqKioqKioqKiogU0VTU0lPTiBTVE9SRUQgU1VDQ0VTU0ZVTExZICoqKioqKioqKicpO1xuICAgIFxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgY29uc29sZS5sb2coJ1Nlc3Npb24gc3RvcmVkIGluIGRhdGFiYXNlIGZvciB1c2VyOicsIHVzZXIuZW1haWwpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzdG9yaW5nIHNlc3Npb24gaW4gZGF0YWJhc2U6JywgZXJyb3IpO1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICB9XG4gIFxuICAvLyBTZXQgdGhlIGNvb2tpZVxuICBjb29raWVzKCkuc2V0KHtcbiAgICBuYW1lOiAnYmV0dGVyLWF1dGguc2Vzc2lvbl90b2tlbicsXG4gICAgdmFsdWU6IHNlc3Npb25Ub2tlbixcbiAgICBleHBpcmVzOiBleHBpcnlEYXRlLFxuICAgIHBhdGg6ICcvJyxcbiAgICBodHRwT25seTogdHJ1ZSxcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXG4gICAgc2FtZVNpdGU6ICdsYXgnXG4gIH0pO1xuICBcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgY29uc29sZS5sb2coJ1NldCBzZXNzaW9uIGNvb2tpZSBmb3IgdXNlcjonLCB1c2VyLmVtYWlsKTtcbiAgfVxuICBcbiAgcmV0dXJuIHNlc3Npb25Ub2tlbjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCwgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgYWN0aW9uOiBzdHJpbmdbXSB9IH0pIHtcbiAgY29uc3QgYWN0aW9uUGF0aCA9IHBhcmFtcy5hY3Rpb24gfHwgW107XG4gIGNvbnN0IGFjdGlvbiA9IGFjdGlvblBhdGhbMF0gfHwgJyc7XG4gIFxuICAvLyBMb2cgdGhlIHJlcXVlc3QgaW4gZGV2ZWxvcG1lbnRcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgY29uc29sZS5sb2coJ0dFVCBjbGllbnQgYXV0aCByZXF1ZXN0OicsIHsgYWN0aW9uLCBwYXRoOiByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUgfSk7XG4gIH1cbiAgXG4gIC8vIEhhbmRsZSBzZXNzaW9uIHJlcXVlc3RzXG4gIGlmIChhY3Rpb24gPT09ICdzZXNzaW9uJyB8fCBhY3Rpb24gPT09ICdnZXQtc2Vzc2lvbicpIHtcbiAgICByZXR1cm4gaGFuZGxlU2Vzc2lvbigpO1xuICB9XG4gIFxuICAvLyBEZWZhdWx0IHJlc3BvbnNlIGZvciBhbnkgb3RoZXIgR0VUIHJlcXVlc3RzXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0LCB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBhY3Rpb246IHN0cmluZ1tdIH0gfSkge1xuICAvLyBHZXQgdGhlIGZpcnN0IHBhcnQgb2YgdGhlIGFjdGlvbiBwYXRoIChzaWduLWluLCBzaWduLXVwLCBldGMuKVxuICBjb25zdCBhY3Rpb25QYXRoID0gcGFyYW1zLmFjdGlvbiB8fCBbXTtcbiAgY29uc3QgYWN0aW9uID0gYWN0aW9uUGF0aFswXSB8fCAnJztcbiAgY29uc3Qgc3ViQWN0aW9uID0gYWN0aW9uUGF0aFsxXSB8fCAnJzsgLy8gVGhpcyBtaWdodCBiZSAnZW1haWwnIGluIC9hcGkvY2xpZW50LWF1dGgvc2lnbi1pbi9lbWFpbFxuICBcbiAgLy8gTG9nIGluIGRldmVsb3BtZW50IG1vZGVcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgY29uc29sZS5sb2coJ1BPU1QgY2xpZW50IGF1dGggcmVxdWVzdDonLCB7IGFjdGlvbiwgc3ViQWN0aW9uLCBwYXRoOiByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUgfSk7XG4gIH1cbiAgXG4gIHRyeSB7XG4gICAgLy8gR2V0IHRoZSByZXF1ZXN0IGJvZHlcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgXG4gICAgLy8gSGFuZGxlIHNlc3Npb24gcmVxdWVzdHMgdmlhIFBPU1RcbiAgICBpZiAoYWN0aW9uID09PSAnc2Vzc2lvbicgfHwgYWN0aW9uID09PSAnZ2V0LXNlc3Npb24nKSB7XG4gICAgICByZXR1cm4gaGFuZGxlU2Vzc2lvbigpO1xuICAgIH1cbiAgICBcbiAgICAvLyBIYW5kbGUgc2lnbi1pbiBhY3Rpb24gKHJlZ2FyZGxlc3Mgb2Ygc3ViQWN0aW9uIGxpa2UgXCJlbWFpbFwiKVxuICAgIGlmIChhY3Rpb24gPT09ICdzaWduLWluJyB8fCBhY3Rpb24gPT09ICdzaWduaW4nKSB7XG4gICAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gYm9keSB8fCB7fTtcbiAgICAgIGNvbnNvbGUubG9nKFwiU2lnbi11cCBib2R5IHJlY2VpdmVkOlwiLCBib2R5KTtcbiAgICAgIGlmICghZW1haWwgfHwgIXBhc3N3b3JkKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7IGVycm9yOiAnRW1haWwgYW5kIHBhc3N3b3JkIGFyZSByZXF1aXJlZCcgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgdG8gc2lnbiBpbiB1c2VyOicsIGVtYWlsKTtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBTaWduSW5Vc2VyKGVtYWlsLCBwYXNzd29yZCk7XG4gICAgICBcbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICBjb25zb2xlLmxvZygnU2lnbi1pbiBmYWlsZWQgZm9yOicsIGVtYWlsKTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgZXJyb3I6ICdJbnZhbGlkIGNyZWRlbnRpYWxzJyB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnVXNlciBzdWNjZXNzZnVsbHkgc2lnbmVkIGluOicsIHVzZXIuZW1haWwpO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgYSBzZXNzaW9uIGNvb2tpZVxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgY3JlYXRlU2Vzc2lvbkNvb2tpZSh1c2VyKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1Nlc3Npb24gY29va2llIGNyZWF0ZWQgZm9yIHVzZXI6JywgdXNlci5lbWFpbCk7XG4gICAgICB9IGNhdGNoIChjb29raWVFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBzZXNzaW9uIGNvb2tpZTonLCBjb29raWVFcnJvcik7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICB1c2VyLFxuICAgICAgICAvLyBBZGQgYW55IG90aGVyIGZpZWxkcyBiZXR0ZXItYXV0aCBleHBlY3RzIGluIHJlc3BvbnNlXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gSGFuZGxlIHNpZ24tdXAgYWN0aW9uIFxuICAgIGlmIChhY3Rpb24gPT09ICdzaWduLXVwJyB8fCBhY3Rpb24gPT09ICdzaWdudXAnKSB7XG4gICAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCwgbmFtZSB9ID0gYm9keSB8fCB7fTtcbiAgICAgIFxuICAgICAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgZXJyb3I6ICdFbWFpbCBhbmQgcGFzc3dvcmQgYXJlIHJlcXVpcmVkJyB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgU2lnblVwVXNlcihlbWFpbCwgcGFzc3dvcmQsIG5hbWUpO1xuICAgICAgXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgZXJyb3I6ICdSZWdpc3RyYXRpb24gZmFpbGVkLiBVc2VyIG1heSBhbHJlYWR5IGV4aXN0LicgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGEgc2Vzc2lvbiBjb29raWUgb24gc2lnbi11cCB0b29cbiAgICAgIGF3YWl0IGNyZWF0ZVNlc3Npb25Db29raWUodXNlcik7XG4gICAgICBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICB1c2VyLFxuICAgICAgICAvLyBBZGQgYW55IG90aGVyIGZpZWxkcyBiZXR0ZXItYXV0aCBleHBlY3RzXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gSGFuZGxlIHNpZ25vdXRcbiAgICBpZiAoYWN0aW9uID09PSAnc2lnbm91dCcgfHwgYWN0aW9uID09PSAnc2lnbi1vdXQnKSB7XG4gICAgICAvLyBDbGVhciBzZXNzaW9uIGNvb2tpZVxuICAgICAgY29va2llcygpLnNldCh7XG4gICAgICAgIG5hbWU6ICdiZXR0ZXItYXV0aC5zZXNzaW9uX3Rva2VuJyxcbiAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICBleHBpcmVzOiBuZXcgRGF0ZSgwKSxcbiAgICAgICAgcGF0aDogJy8nLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIExvZyBpbiBkZXZlbG9wbWVudFxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIHNpZ25lZCBvdXQgLSBzZXNzaW9uIGNvb2tpZSBjbGVhcmVkJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFVua25vd24gYWN0aW9uXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogYFVua25vd24gYWN0aW9uOiAke2FjdGlvbn0vJHtzdWJBY3Rpb259YCB9LFxuICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdDbGllbnQgYXV0aCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn0gIl0sIm5hbWVzIjpbIlNpZ25JblVzZXIiLCJTaWduVXBVc2VyIiwidmFsaWRhdGVTZXNzaW9uRnJvbUNvb2tpZSIsIk5leHRSZXNwb25zZSIsImNvb2tpZXMiLCJjcnlwdG8iLCJkYiIsInNxbCIsImhhbmRsZVNlc3Npb24iLCJpc0F1dGhlbnRpY2F0ZWQiLCJ1c2VyIiwianNvbiIsInN1Y2Nlc3MiLCJpZCIsImVtYWlsIiwibmFtZSIsImltYWdlIiwiY29va2llU3RvcmUiLCJzZXNzaW9uQ29va2llIiwiZ2V0IiwidmFsdWUiLCJwcm9jZXNzIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiY3JlYXRlU2Vzc2lvbkNvb2tpZSIsInNlc3Npb25JZCIsInJhbmRvbVVVSUQiLCJzaWduYXR1cmUiLCJjcmVhdGVIYXNoIiwidXBkYXRlIiwiZGlnZXN0Iiwic2Vzc2lvblRva2VuIiwiZXhwaXJ5RGF0ZSIsIkRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImV4ZWN1dGUiLCJ0b0lTT1N0cmluZyIsInNldCIsImV4cGlyZXMiLCJwYXRoIiwiaHR0cE9ubHkiLCJzZWN1cmUiLCJzYW1lU2l0ZSIsIkdFVCIsInJlcXVlc3QiLCJwYXJhbXMiLCJhY3Rpb25QYXRoIiwiYWN0aW9uIiwibmV4dFVybCIsInBhdGhuYW1lIiwiUE9TVCIsInN1YkFjdGlvbiIsImJvZHkiLCJwYXNzd29yZCIsInN0YXR1cyIsImNvb2tpZUVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/client-auth/[...action]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SignInUser: () => (/* binding */ SignInUser),\n/* harmony export */   SignUpUser: () => (/* binding */ SignUpUser),\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   getAuthSession: () => (/* binding */ getAuthSession),\n/* harmony export */   handlers: () => (/* binding */ handlers),\n/* harmony export */   isAuthenticated: () => (/* binding */ isAuthenticated),\n/* harmony export */   signIn: () => (/* binding */ signIn),\n/* harmony export */   signOut: () => (/* binding */ signOut)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _auth_drizzle_adapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @auth/drizzle-adapter */ \"(rsc)/./node_modules/@auth/drizzle-adapter/index.js\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var next_auth_providers_email__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth/providers/email */ \"(rsc)/./node_modules/next-auth/providers/email.js\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/sql.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\n\nconst isDev = \"development\" === \"development\";\nconst authOptions = {\n    adapter: (0,_auth_drizzle_adapter__WEBPACK_IMPORTED_MODULE_1__.DrizzleAdapter)(_lib_db__WEBPACK_IMPORTED_MODULE_5__.db),\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    secret: process.env.NEXTAUTH_SECRET || process.env.AUTH_SECRET,\n    pages: {\n        signIn: \"/auth/sign-in\",\n        signOut: \"/auth/sign-out\",\n        error: \"/auth/error\"\n    },\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_4__[\"default\"])({\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) return null;\n                const userResults = await _lib_db__WEBPACK_IMPORTED_MODULE_5__.db.execute(drizzle_orm__WEBPACK_IMPORTED_MODULE_8__.sql`\n          SELECT * FROM users WHERE email = ${credentials.email} LIMIT 1\n        `);\n                if (!userResults[0]) return null;\n                const userData = userResults[0];\n                const hashedPassword = typeof userData.password === \"string\" ? userData.password : userData.password ? String(userData.password) : \"\";\n                const isValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_6__[\"default\"].compare(credentials.password, hashedPassword);\n                if (!isValid) return null;\n                return {\n                    id: String(userData.id),\n                    email: String(userData.email),\n                    name: userData.name || null,\n                    image: userData.image || null\n                };\n            }\n        }),\n        (0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            clientId: process.env.GOOGLE_CLIENT_ID,\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET\n        }),\n        (0,next_auth_providers_email__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\n            server: {\n                host: process.env.EMAIL_SERVER_HOST,\n                port: Number(process.env.EMAIL_SERVER_PORT),\n                auth: {\n                    user: process.env.EMAIL_SERVER_USER,\n                    pass: process.env.EMAIL_SERVER_PASSWORD\n                }\n            },\n            from: process.env.EMAIL_FROM\n        })\n    ],\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.id = user.id;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token && session.user) {\n                session.user.id = token.id;\n            }\n            return session;\n        }\n    },\n    debug: isDev\n};\nconst { handlers, auth, signIn, signOut } = next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions);\nasync function getAuthSession() {\n    if (typeof auth === \"function\") {\n        return await auth();\n    } else {\n        const session = await fetch(\"/api/client-auth/session\", {\n            credentials: \"include\"\n        }).then((res)=>res.json()).catch((err)=>{\n            console.error(\"Error fetching session:\", err);\n            return {\n                user: null\n            };\n        });\n        return session;\n    }\n}\nasync function isAuthenticated() {\n    const session = await getAuthSession();\n    return !!session?.user;\n}\nasync function SignInUser(email, password) {\n    try {\n        const userResults = await _lib_db__WEBPACK_IMPORTED_MODULE_5__.db.execute(drizzle_orm__WEBPACK_IMPORTED_MODULE_8__.sql`\n      SELECT * FROM users WHERE email = ${email} LIMIT 1\n    `);\n        if (!userResults[0]) return null;\n        const userData = userResults[0];\n        const hashedPassword = typeof userData.password === \"string\" ? userData.password : userData.password ? String(userData.password) : \"\";\n        const isValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_6__[\"default\"].compare(password, hashedPassword);\n        if (!isValid) return null;\n        return {\n            id: String(userData.id),\n            email: String(userData.email),\n            name: userData.name || null,\n            image: userData.image || null\n        };\n    } catch (error) {\n        console.error(\"SignInUser error:\", error);\n        return null;\n    }\n}\nasync function SignUpUser(email, password, name) {\n    try {\n        const existingUser = await _lib_db__WEBPACK_IMPORTED_MODULE_5__.db.execute(drizzle_orm__WEBPACK_IMPORTED_MODULE_8__.sql`\n      SELECT * FROM users WHERE email = ${email} LIMIT 1\n    `);\n        if (existingUser[0]) return null;\n        const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_6__[\"default\"].hash(password, 10);\n        const userId = crypto__WEBPACK_IMPORTED_MODULE_7___default().randomUUID();\n        await _lib_db__WEBPACK_IMPORTED_MODULE_5__.db.execute(drizzle_orm__WEBPACK_IMPORTED_MODULE_8__.sql`\n      INSERT INTO users (id, email, name, password)\n      VALUES (${userId}, ${email}, ${name || null}, ${hashedPassword})\n    `);\n        return {\n            id: userId,\n            email,\n            name: name || null,\n            image: null\n        };\n    } catch (error) {\n        console.error(\"SignUpUser error:\", error);\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSSxJQUFJO1lBQ3ZCZSxPQUFPTixTQUFTTSxLQUFLLElBQUk7UUFDM0I7SUFDRixFQUFFLE9BQU9qQixPQUFPO1FBQ2QrQyxRQUFRL0MsS0FBSyxDQUFDLHFCQUFxQkE7UUFDbkMsT0FBTztJQUNUO0FBQ0Y7QUFFTyxlQUFla0QsV0FBVzlDLEtBQWEsRUFBRUcsUUFBZ0IsRUFBRUwsSUFBYTtJQUM3RSxJQUFJO1FBQ0YsTUFBTWlELGVBQWUsTUFBTXJFLHVDQUFFQSxDQUFDNEIsT0FBTyxDQUFDM0IsNENBQUcsQ0FBQzt3Q0FDTixFQUFFcUIsTUFBTTtJQUM1QyxDQUFDO1FBRUQsSUFBSStDLFlBQVksQ0FBQyxFQUFFLEVBQUUsT0FBTztRQUU1QixNQUFNdkMsaUJBQWlCLE1BQU01QixxREFBVyxDQUFDdUIsVUFBVTtRQUNuRCxNQUFNOEMsU0FBU3BFLHdEQUFpQjtRQUVoQyxNQUFNSCx1Q0FBRUEsQ0FBQzRCLE9BQU8sQ0FBQzNCLDRDQUFHLENBQUM7O2NBRVgsRUFBRXNFLE9BQU8sRUFBRSxFQUFFakQsTUFBTSxFQUFFLEVBQUVGLFFBQVEsS0FBSyxFQUFFLEVBQUVVLGVBQWU7SUFDakUsQ0FBQztRQUVELE9BQU87WUFDTEksSUFBSXFDO1lBQ0pqRDtZQUNBRixNQUFNQSxRQUFRO1lBQ2RlLE9BQU87UUFDVDtJQUNGLEVBQUUsT0FBT2pCLE9BQU87UUFDZCtDLFFBQVEvQyxLQUFLLENBQUMscUJBQXFCQTtRQUNuQyxPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3JlY2lwZS1rZWVwZXIvLi9zcmMvbGliL2F1dGgudHM/NjY5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTmV4dEF1dGggZnJvbSBcIm5leHQtYXV0aFwiO1xuaW1wb3J0IHsgRGVmYXVsdFNlc3Npb24sIFVzZXIgfSBmcm9tIFwibmV4dC1hdXRoXCI7XG5pbXBvcnQgdHlwZSB7IEpXVCB9IGZyb20gXCJuZXh0LWF1dGgvand0XCI7XG5pbXBvcnQgeyBEcml6emxlQWRhcHRlciB9IGZyb20gXCJAYXV0aC9kcml6emxlLWFkYXB0ZXJcIjtcbmltcG9ydCBHb29nbGVQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9nb29nbGVcIjtcbmltcG9ydCBFbWFpbFByb3ZpZGVyIGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzL2VtYWlsXCI7XG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFsc1wiO1xuaW1wb3J0IHsgZGIgfSBmcm9tIFwiQC9saWIvZGJcIjtcbmltcG9ydCB7IHNxbCB9IGZyb20gXCJkcml6emxlLW9ybVwiO1xuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIjtcbmltcG9ydCBjcnlwdG8gZnJvbSBcImNyeXB0b1wiO1xuXG4vLyBFeHRlbmQgc2Vzc2lvbiB0eXBlIHRvIGluY2x1ZGUgdXNlciBJRFxuZGVjbGFyZSBtb2R1bGUgXCJuZXh0LWF1dGhcIiB7XG4gIGludGVyZmFjZSBTZXNzaW9uIGV4dGVuZHMgRGVmYXVsdFNlc3Npb24ge1xuICAgIHVzZXI6IHtcbiAgICAgIGlkOiBzdHJpbmc7XG4gICAgfSAmIERlZmF1bHRTZXNzaW9uW1widXNlclwiXTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgRGJVc2VyUmVzdWx0IHtcbiAgaWQ6IHN0cmluZyB8IG51bWJlcjtcbiAgZW1haWw6IHN0cmluZyB8IG51bGw7XG4gIG5hbWU/OiBzdHJpbmcgfCBudWxsO1xuICBpbWFnZT86IHN0cmluZyB8IG51bGw7XG4gIHBhc3N3b3JkPzogc3RyaW5nIHwgbnVsbDtcbiAgW2tleTogc3RyaW5nXTogdW5rbm93bjtcbn1cblxuY29uc3QgaXNEZXYgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiO1xuXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnMgPSB7XG4gIGFkYXB0ZXI6IERyaXp6bGVBZGFwdGVyKGRiKSxcbiAgc2Vzc2lvbjoge1xuICAgIHN0cmF0ZWd5OiBcImp3dFwiIGFzIGNvbnN0LFxuICAgIG1heEFnZTogMzAgKiAyNCAqIDYwICogNjAsIC8vIDMwIGRheXNcbiAgfSxcbiAgc2VjcmV0OiBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQgfHwgcHJvY2Vzcy5lbnYuQVVUSF9TRUNSRVQsXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiBcIi9hdXRoL3NpZ24taW5cIixcbiAgICBzaWduT3V0OiBcIi9hdXRoL3NpZ24tb3V0XCIsXG4gICAgZXJyb3I6IFwiL2F1dGgvZXJyb3JcIixcbiAgfSxcbiAgcHJvdmlkZXJzOiBbXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XG4gICAgICBuYW1lOiBcIkNyZWRlbnRpYWxzXCIsXG4gICAgICBjcmVkZW50aWFsczoge1xuICAgICAgICBlbWFpbDogeyBsYWJlbDogXCJFbWFpbFwiLCB0eXBlOiBcImVtYWlsXCIgfSxcbiAgICAgICAgcGFzc3dvcmQ6IHsgbGFiZWw6IFwiUGFzc3dvcmRcIiwgdHlwZTogXCJwYXNzd29yZFwiIH0sXG4gICAgICB9LFxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHJldHVybiBudWxsO1xuXG4gICAgICAgIGNvbnN0IHVzZXJSZXN1bHRzID0gYXdhaXQgZGIuZXhlY3V0ZShzcWxgXG4gICAgICAgICAgU0VMRUNUICogRlJPTSB1c2VycyBXSEVSRSBlbWFpbCA9ICR7Y3JlZGVudGlhbHMuZW1haWx9IExJTUlUIDFcbiAgICAgICAgYCk7XG5cbiAgICAgICAgaWYgKCF1c2VyUmVzdWx0c1swXSkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgY29uc3QgdXNlckRhdGEgPSB1c2VyUmVzdWx0c1swXSBhcyB1bmtub3duIGFzIERiVXNlclJlc3VsdDtcbiAgICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPVxuICAgICAgICAgIHR5cGVvZiB1c2VyRGF0YS5wYXNzd29yZCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyB1c2VyRGF0YS5wYXNzd29yZFxuICAgICAgICAgICAgOiB1c2VyRGF0YS5wYXNzd29yZFxuICAgICAgICAgICAgPyBTdHJpbmcodXNlckRhdGEucGFzc3dvcmQpXG4gICAgICAgICAgICA6IFwiXCI7XG5cbiAgICAgICAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKGNyZWRlbnRpYWxzLnBhc3N3b3JkLCBoYXNoZWRQYXNzd29yZCk7XG4gICAgICAgIGlmICghaXNWYWxpZCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpZDogU3RyaW5nKHVzZXJEYXRhLmlkKSxcbiAgICAgICAgICBlbWFpbDogU3RyaW5nKHVzZXJEYXRhLmVtYWlsKSxcbiAgICAgICAgICBuYW1lOiB1c2VyRGF0YS5uYW1lIHx8IG51bGwsXG4gICAgICAgICAgaW1hZ2U6IHVzZXJEYXRhLmltYWdlIHx8IG51bGwsXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0pLFxuICAgIEdvb2dsZVByb3ZpZGVyKHtcbiAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX0lEISxcbiAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9TRUNSRVQhLFxuICAgIH0pLFxuICAgIEVtYWlsUHJvdmlkZXIoe1xuICAgICAgc2VydmVyOiB7XG4gICAgICAgIGhvc3Q6IHByb2Nlc3MuZW52LkVNQUlMX1NFUlZFUl9IT1NUISxcbiAgICAgICAgcG9ydDogTnVtYmVyKHByb2Nlc3MuZW52LkVNQUlMX1NFUlZFUl9QT1JUISksXG4gICAgICAgIGF1dGg6IHtcbiAgICAgICAgICB1c2VyOiBwcm9jZXNzLmVudi5FTUFJTF9TRVJWRVJfVVNFUiEsXG4gICAgICAgICAgcGFzczogcHJvY2Vzcy5lbnYuRU1BSUxfU0VSVkVSX1BBU1NXT1JEISxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBmcm9tOiBwcm9jZXNzLmVudi5FTUFJTF9GUk9NISxcbiAgICB9KSxcbiAgXSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIgfTogeyB0b2tlbjogSldUOyB1c2VyPzogVXNlciB9KSB7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICB0b2tlbi5pZCA9IHVzZXIuaWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gdG9rZW47XG4gICAgfSxcbiAgICBhc3luYyBzZXNzaW9uKHtcbiAgICAgIHNlc3Npb24sXG4gICAgICB0b2tlbixcbiAgICB9OiB7XG4gICAgICBzZXNzaW9uOiB7IHVzZXI/OiB7IGlkPzogc3RyaW5nIH0gfSAmIERlZmF1bHRTZXNzaW9uO1xuICAgICAgdG9rZW46IEpXVDtcbiAgICB9KSB7XG4gICAgICBpZiAodG9rZW4gJiYgc2Vzc2lvbi51c2VyKSB7XG4gICAgICAgIHNlc3Npb24udXNlci5pZCA9IHRva2VuLmlkIGFzIHN0cmluZztcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH0sXG4gIH0sXG4gIGRlYnVnOiBpc0Rldixcbn07XG5cbmV4cG9ydCBjb25zdCB7IGhhbmRsZXJzLCBhdXRoLCBzaWduSW4sIHNpZ25PdXQgfSA9IE5leHRBdXRoKGF1dGhPcHRpb25zKTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEF1dGhTZXNzaW9uKCkge1xuICBpZiAodHlwZW9mIGF1dGggPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gYXdhaXQgYXV0aCgpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBmZXRjaCgnL2FwaS9jbGllbnQtYXV0aC9zZXNzaW9uJywge1xuICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICB9KS50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHNlc3Npb246JywgZXJyKTtcbiAgICAgICAgcmV0dXJuIHsgdXNlcjogbnVsbCB9O1xuICAgICAgfSk7XG4gICAgICBcbiAgICByZXR1cm4gc2Vzc2lvbjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKCkge1xuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0QXV0aFNlc3Npb24oKTtcbiAgcmV0dXJuICEhc2Vzc2lvbj8udXNlcjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFNpZ25JblVzZXIoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXJSZXN1bHRzID0gYXdhaXQgZGIuZXhlY3V0ZShzcWxgXG4gICAgICBTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIGVtYWlsID0gJHtlbWFpbH0gTElNSVQgMVxuICAgIGApO1xuXG4gICAgaWYgKCF1c2VyUmVzdWx0c1swXSkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCB1c2VyRGF0YSA9IHVzZXJSZXN1bHRzWzBdIGFzIHVua25vd24gYXMgRGJVc2VyUmVzdWx0O1xuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID1cbiAgICAgIHR5cGVvZiB1c2VyRGF0YS5wYXNzd29yZCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICA/IHVzZXJEYXRhLnBhc3N3b3JkXG4gICAgICAgIDogdXNlckRhdGEucGFzc3dvcmRcbiAgICAgICAgPyBTdHJpbmcodXNlckRhdGEucGFzc3dvcmQpXG4gICAgICAgIDogXCJcIjtcblxuICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgaGFzaGVkUGFzc3dvcmQpO1xuICAgIGlmICghaXNWYWxpZCkgcmV0dXJuIG51bGw7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IFN0cmluZyh1c2VyRGF0YS5pZCksXG4gICAgICBlbWFpbDogU3RyaW5nKHVzZXJEYXRhLmVtYWlsKSxcbiAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUgfHwgbnVsbCxcbiAgICAgIGltYWdlOiB1c2VyRGF0YS5pbWFnZSB8fCBudWxsLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlNpZ25JblVzZXIgZXJyb3I6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gU2lnblVwVXNlcihlbWFpbDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nLCBuYW1lPzogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgZGIuZXhlY3V0ZShzcWxgXG4gICAgICBTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIGVtYWlsID0gJHtlbWFpbH0gTElNSVQgMVxuICAgIGApO1xuXG4gICAgaWYgKGV4aXN0aW5nVXNlclswXSkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMCk7XG4gICAgY29uc3QgdXNlcklkID0gY3J5cHRvLnJhbmRvbVVVSUQoKTtcblxuICAgIGF3YWl0IGRiLmV4ZWN1dGUoc3FsYFxuICAgICAgSU5TRVJUIElOVE8gdXNlcnMgKGlkLCBlbWFpbCwgbmFtZSwgcGFzc3dvcmQpXG4gICAgICBWQUxVRVMgKCR7dXNlcklkfSwgJHtlbWFpbH0sICR7bmFtZSB8fCBudWxsfSwgJHtoYXNoZWRQYXNzd29yZH0pXG4gICAgYCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHVzZXJJZCxcbiAgICAgIGVtYWlsLFxuICAgICAgbmFtZTogbmFtZSB8fCBudWxsLFxuICAgICAgaW1hZ2U6IG51bGwsXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiU2lnblVwVXNlciBlcnJvcjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dEF1dGgiLCJEcml6emxlQWRhcHRlciIsIkdvb2dsZVByb3ZpZGVyIiwiRW1haWxQcm92aWRlciIsIkNyZWRlbnRpYWxzUHJvdmlkZXIiLCJkYiIsInNxbCIsImJjcnlwdCIsImNyeXB0byIsImlzRGV2IiwicHJvY2VzcyIsImF1dGhPcHRpb25zIiwiYWRhcHRlciIsInNlc3Npb24iLCJzdHJhdGVneSIsIm1heEFnZSIsInNlY3JldCIsImVudiIsIk5FWFRBVVRIX1NFQ1JFVCIsIkFVVEhfU0VDUkVUIiwicGFnZXMiLCJzaWduSW4iLCJzaWduT3V0IiwiZXJyb3IiLCJwcm92aWRlcnMiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwidXNlclJlc3VsdHMiLCJleGVjdXRlIiwidXNlckRhdGEiLCJoYXNoZWRQYXNzd29yZCIsIlN0cmluZyIsImlzVmFsaWQiLCJjb21wYXJlIiwiaWQiLCJpbWFnZSIsImNsaWVudElkIiwiR09PR0xFX0NMSUVOVF9JRCIsImNsaWVudFNlY3JldCIsIkdPT0dMRV9DTElFTlRfU0VDUkVUIiwic2VydmVyIiwiaG9zdCIsIkVNQUlMX1NFUlZFUl9IT1NUIiwicG9ydCIsIk51bWJlciIsIkVNQUlMX1NFUlZFUl9QT1JUIiwiYXV0aCIsInVzZXIiLCJFTUFJTF9TRVJWRVJfVVNFUiIsInBhc3MiLCJFTUFJTF9TRVJWRVJfUEFTU1dPUkQiLCJmcm9tIiwiRU1BSUxfRlJPTSIsImNhbGxiYWNrcyIsImp3dCIsInRva2VuIiwiZGVidWciLCJoYW5kbGVycyIsImdldEF1dGhTZXNzaW9uIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwianNvbiIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImlzQXV0aGVudGljYXRlZCIsIlNpZ25JblVzZXIiLCJTaWduVXBVc2VyIiwiZXhpc3RpbmdVc2VyIiwiaGFzaCIsInVzZXJJZCIsInJhbmRvbVVVSUQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm_postgres_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm/postgres-js */ \"(rsc)/./node_modules/drizzle-orm/postgres-js/driver.js\");\n/* harmony import */ var postgres__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! postgres */ \"(rsc)/./node_modules/postgres/src/index.js\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./schema */ \"(rsc)/./src/lib/schema.ts\");\n\n\n\n// Use the unpooled connection for drizzle adapter\nlet connectionString = process.env.DATABASE_URL_UNPOOLED || \"\";\n// Clean up any whitespace or line breaks in the connection string\nconnectionString = connectionString.replace(/\\s+/g, \"\");\n// Add debug logging\nconsole.log(\"Database connection string available:\", !!connectionString);\nconsole.log(\"Connection string prefix:\", connectionString?.substring(0, 20) + \"...\");\n// Create the connection\nlet db;\ntry {\n    const client = (0,postgres__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(connectionString);\n    // Create the db instance with schema\n    db = (0,drizzle_orm_postgres_js__WEBPACK_IMPORTED_MODULE_2__.drizzle)(client, {\n        schema: _schema__WEBPACK_IMPORTED_MODULE_1__\n    });\n    console.log(\"Database connection successful!\");\n} catch (error) {\n    console.error(\"Database connection error:\", error);\n    throw error;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBa0Q7QUFDbEI7QUFDRztBQUduQyxrREFBa0Q7QUFDbEQsSUFBSUcsbUJBQW1CQyxRQUFRQyxHQUFHLENBQUNDLHFCQUFxQixJQUFJO0FBRTVELGtFQUFrRTtBQUNsRUgsbUJBQW1CQSxpQkFBaUJJLE9BQU8sQ0FBQyxRQUFRO0FBRXBELG9CQUFvQjtBQUNwQkMsUUFBUUMsR0FBRyxDQUFDLHlDQUF5QyxDQUFDLENBQUNOO0FBQ3ZESyxRQUFRQyxHQUFHLENBQUMsNkJBQTZCTixrQkFBa0JPLFVBQVUsR0FBRyxNQUFNO0FBRTlFLHdCQUF3QjtBQUN4QixJQUFJQztBQUNKLElBQUk7SUFDRixNQUFNQyxTQUFTWCxvREFBUUEsQ0FBQ0U7SUFFeEIscUNBQXFDO0lBQ3JDUSxLQUFLWCxnRUFBT0EsQ0FBQ1ksUUFBUTtRQUFFVixNQUFNQSxzQ0FBQUE7SUFBQztJQUM5Qk0sUUFBUUMsR0FBRyxDQUFDO0FBQ2QsRUFBRSxPQUFPSSxPQUFPO0lBQ2RMLFFBQVFLLEtBQUssQ0FBQyw4QkFBOEJBO0lBQzVDLE1BQU1BO0FBQ1I7QUFFYyIsInNvdXJjZXMiOlsid2VicGFjazovL3JlY2lwZS1rZWVwZXIvLi9zcmMvbGliL2RiLnRzPzllNGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZHJpenpsZSB9IGZyb20gJ2RyaXp6bGUtb3JtL3Bvc3RncmVzLWpzJztcbmltcG9ydCBwb3N0Z3JlcyBmcm9tICdwb3N0Z3Jlcyc7XG5pbXBvcnQgKiBhcyBzY2hlbWEgZnJvbSAnLi9zY2hlbWEnO1xuaW1wb3J0IHsgdHlwZSBQb3N0Z3Jlc0pzRGF0YWJhc2UgfSBmcm9tICdkcml6emxlLW9ybS9wb3N0Z3Jlcy1qcyc7XG5cbi8vIFVzZSB0aGUgdW5wb29sZWQgY29ubmVjdGlvbiBmb3IgZHJpenpsZSBhZGFwdGVyXG5sZXQgY29ubmVjdGlvblN0cmluZyA9IHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTF9VTlBPT0xFRCB8fCAnJztcblxuLy8gQ2xlYW4gdXAgYW55IHdoaXRlc3BhY2Ugb3IgbGluZSBicmVha3MgaW4gdGhlIGNvbm5lY3Rpb24gc3RyaW5nXG5jb25uZWN0aW9uU3RyaW5nID0gY29ubmVjdGlvblN0cmluZy5yZXBsYWNlKC9cXHMrL2csICcnKTtcblxuLy8gQWRkIGRlYnVnIGxvZ2dpbmdcbmNvbnNvbGUubG9nKFwiRGF0YWJhc2UgY29ubmVjdGlvbiBzdHJpbmcgYXZhaWxhYmxlOlwiLCAhIWNvbm5lY3Rpb25TdHJpbmcpO1xuY29uc29sZS5sb2coXCJDb25uZWN0aW9uIHN0cmluZyBwcmVmaXg6XCIsIGNvbm5lY3Rpb25TdHJpbmc/LnN1YnN0cmluZygwLCAyMCkgKyBcIi4uLlwiKTtcblxuLy8gQ3JlYXRlIHRoZSBjb25uZWN0aW9uXG5sZXQgZGI6IFBvc3RncmVzSnNEYXRhYmFzZTx0eXBlb2Ygc2NoZW1hPjtcbnRyeSB7XG4gIGNvbnN0IGNsaWVudCA9IHBvc3RncmVzKGNvbm5lY3Rpb25TdHJpbmcpO1xuICBcbiAgLy8gQ3JlYXRlIHRoZSBkYiBpbnN0YW5jZSB3aXRoIHNjaGVtYVxuICBkYiA9IGRyaXp6bGUoY2xpZW50LCB7IHNjaGVtYSB9KTtcbiAgY29uc29sZS5sb2coXCJEYXRhYmFzZSBjb25uZWN0aW9uIHN1Y2Nlc3NmdWwhXCIpO1xufSBjYXRjaCAoZXJyb3IpIHtcbiAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZXJyb3I6XCIsIGVycm9yKTtcbiAgdGhyb3cgZXJyb3I7XG59XG5cbmV4cG9ydCB7IGRiIH07ICJdLCJuYW1lcyI6WyJkcml6emxlIiwicG9zdGdyZXMiLCJzY2hlbWEiLCJjb25uZWN0aW9uU3RyaW5nIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTF9VTlBPT0xFRCIsInJlcGxhY2UiLCJjb25zb2xlIiwibG9nIiwic3Vic3RyaW5nIiwiZGIiLCJjbGllbnQiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/schema.ts":
/*!***************************!*\
  !*** ./src/lib/schema.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   recipes: () => (/* binding */ recipes),\n/* harmony export */   sessions: () => (/* binding */ sessions),\n/* harmony export */   users: () => (/* binding */ users)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/table.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/uuid.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/text.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/boolean.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/timestamp.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/integer.js\");\n\nconst users = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"users\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.uuid)(\"id\").primaryKey().defaultRandom(),\n    email: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"email\").notNull().unique(),\n    name: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"name\"),\n    password: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"password\").notNull(),\n    email_verified: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.boolean)(\"email_verified\").default(false),\n    created_at: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\").defaultNow().notNull(),\n    updated_at: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"updated_at\").defaultNow().notNull()\n});\nconst sessions = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"sessions\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.uuid)(\"id\").primaryKey().defaultRandom(),\n    user_id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.uuid)(\"user_id\").notNull().references(()=>users.id),\n    expires_at: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"expires_at\").notNull(),\n    created_at: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\").defaultNow().notNull(),\n    updated_at: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"updated_at\").defaultNow().notNull()\n});\nconst recipes = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"recipes\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.uuid)(\"id\").primaryKey().defaultRandom(),\n    user_id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.uuid)(\"user_id\").notNull().references(()=>users.id),\n    title: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"title\").notNull(),\n    description: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"description\"),\n    ingredients: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"ingredients\").notNull(),\n    instructions: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"instructions\").notNull(),\n    cooking_time: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.integer)(\"cooking_time\"),\n    servings: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.integer)(\"servings\"),\n    type: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"type\").notNull(),\n    thumbnail: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.text)(\"thumbnail\"),\n    created_at: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"created_at\").defaultNow().notNull(),\n    updated_at: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)(\"updated_at\").defaultNow().notNull()\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3NjaGVtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBdUY7QUFFaEYsTUFBTU0sUUFBUU4sNERBQU9BLENBQUMsU0FBUztJQUNwQ08sSUFBSUYseURBQUlBLENBQUMsTUFBTUcsVUFBVSxHQUFHQyxhQUFhO0lBQ3pDQyxPQUFPVCx5REFBSUEsQ0FBQyxTQUFTVSxPQUFPLEdBQUdDLE1BQU07SUFDckNDLE1BQU1aLHlEQUFJQSxDQUFDO0lBQ1hhLFVBQVViLHlEQUFJQSxDQUFDLFlBQVlVLE9BQU87SUFDbENJLGdCQUFnQlosNERBQU9BLENBQUMsa0JBQWtCYSxPQUFPLENBQUM7SUFDbERDLFlBQVlmLDhEQUFTQSxDQUFDLGNBQWNnQixVQUFVLEdBQUdQLE9BQU87SUFDeERRLFlBQVlqQiw4REFBU0EsQ0FBQyxjQUFjZ0IsVUFBVSxHQUFHUCxPQUFPO0FBQzFELEdBQUc7QUFFSSxNQUFNUyxXQUFXcEIsNERBQU9BLENBQUMsWUFBWTtJQUMxQ08sSUFBSUYseURBQUlBLENBQUMsTUFBTUcsVUFBVSxHQUFHQyxhQUFhO0lBQ3pDWSxTQUFTaEIseURBQUlBLENBQUMsV0FBV00sT0FBTyxHQUFHVyxVQUFVLENBQUMsSUFBTWhCLE1BQU1DLEVBQUU7SUFDNURnQixZQUFZckIsOERBQVNBLENBQUMsY0FBY1MsT0FBTztJQUMzQ00sWUFBWWYsOERBQVNBLENBQUMsY0FBY2dCLFVBQVUsR0FBR1AsT0FBTztJQUN4RFEsWUFBWWpCLDhEQUFTQSxDQUFDLGNBQWNnQixVQUFVLEdBQUdQLE9BQU87QUFDMUQsR0FBRztBQUVJLE1BQU1hLFVBQVV4Qiw0REFBT0EsQ0FBQyxXQUFXO0lBQ3hDTyxJQUFJRix5REFBSUEsQ0FBQyxNQUFNRyxVQUFVLEdBQUdDLGFBQWE7SUFDekNZLFNBQVNoQix5REFBSUEsQ0FBQyxXQUFXTSxPQUFPLEdBQUdXLFVBQVUsQ0FBQyxJQUFNaEIsTUFBTUMsRUFBRTtJQUM1RGtCLE9BQU94Qix5REFBSUEsQ0FBQyxTQUFTVSxPQUFPO0lBQzVCZSxhQUFhekIseURBQUlBLENBQUM7SUFDbEIwQixhQUFhMUIseURBQUlBLENBQUMsZUFBZVUsT0FBTztJQUN4Q2lCLGNBQWMzQix5REFBSUEsQ0FBQyxnQkFBZ0JVLE9BQU87SUFDMUNrQixjQUFjekIsNERBQU9BLENBQUM7SUFDdEIwQixVQUFVMUIsNERBQU9BLENBQUM7SUFDbEIyQixNQUFNOUIseURBQUlBLENBQUMsUUFBUVUsT0FBTztJQUMxQnFCLFdBQVcvQix5REFBSUEsQ0FBQztJQUNoQmdCLFlBQVlmLDhEQUFTQSxDQUFDLGNBQWNnQixVQUFVLEdBQUdQLE9BQU87SUFDeERRLFlBQVlqQiw4REFBU0EsQ0FBQyxjQUFjZ0IsVUFBVSxHQUFHUCxPQUFPO0FBQzFELEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZWNpcGUta2VlcGVyLy4vc3JjL2xpYi9zY2hlbWEudHM/ZTA2MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwZ1RhYmxlLCB0ZXh0LCB0aW1lc3RhbXAsIGJvb2xlYW4sIGludGVnZXIsIHV1aWQgfSBmcm9tICdkcml6emxlLW9ybS9wZy1jb3JlJztcblxuZXhwb3J0IGNvbnN0IHVzZXJzID0gcGdUYWJsZSgndXNlcnMnLCB7XG4gIGlkOiB1dWlkKCdpZCcpLnByaW1hcnlLZXkoKS5kZWZhdWx0UmFuZG9tKCksXG4gIGVtYWlsOiB0ZXh0KCdlbWFpbCcpLm5vdE51bGwoKS51bmlxdWUoKSxcbiAgbmFtZTogdGV4dCgnbmFtZScpLFxuICBwYXNzd29yZDogdGV4dCgncGFzc3dvcmQnKS5ub3ROdWxsKCksXG4gIGVtYWlsX3ZlcmlmaWVkOiBib29sZWFuKCdlbWFpbF92ZXJpZmllZCcpLmRlZmF1bHQoZmFsc2UpLFxuICBjcmVhdGVkX2F0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnKS5kZWZhdWx0Tm93KCkubm90TnVsbCgpLFxuICB1cGRhdGVkX2F0OiB0aW1lc3RhbXAoJ3VwZGF0ZWRfYXQnKS5kZWZhdWx0Tm93KCkubm90TnVsbCgpLFxufSk7XG5cbmV4cG9ydCBjb25zdCBzZXNzaW9ucyA9IHBnVGFibGUoJ3Nlc3Npb25zJywge1xuICBpZDogdXVpZCgnaWQnKS5wcmltYXJ5S2V5KCkuZGVmYXVsdFJhbmRvbSgpLFxuICB1c2VyX2lkOiB1dWlkKCd1c2VyX2lkJykubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICBleHBpcmVzX2F0OiB0aW1lc3RhbXAoJ2V4cGlyZXNfYXQnKS5ub3ROdWxsKCksXG4gIGNyZWF0ZWRfYXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcpLmRlZmF1bHROb3coKS5ub3ROdWxsKCksXG4gIHVwZGF0ZWRfYXQ6IHRpbWVzdGFtcCgndXBkYXRlZF9hdCcpLmRlZmF1bHROb3coKS5ub3ROdWxsKCksXG59KTtcblxuZXhwb3J0IGNvbnN0IHJlY2lwZXMgPSBwZ1RhYmxlKCdyZWNpcGVzJywge1xuICBpZDogdXVpZCgnaWQnKS5wcmltYXJ5S2V5KCkuZGVmYXVsdFJhbmRvbSgpLFxuICB1c2VyX2lkOiB1dWlkKCd1c2VyX2lkJykubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICB0aXRsZTogdGV4dCgndGl0bGUnKS5ub3ROdWxsKCksXG4gIGRlc2NyaXB0aW9uOiB0ZXh0KCdkZXNjcmlwdGlvbicpLFxuICBpbmdyZWRpZW50czogdGV4dCgnaW5ncmVkaWVudHMnKS5ub3ROdWxsKCksXG4gIGluc3RydWN0aW9uczogdGV4dCgnaW5zdHJ1Y3Rpb25zJykubm90TnVsbCgpLFxuICBjb29raW5nX3RpbWU6IGludGVnZXIoJ2Nvb2tpbmdfdGltZScpLFxuICBzZXJ2aW5nczogaW50ZWdlcignc2VydmluZ3MnKSxcbiAgdHlwZTogdGV4dCgndHlwZScpLm5vdE51bGwoKSwgLy8gJ3BlcnNvbmFsJyBvciAnZXh0ZXJuYWwnXG4gIHRodW1ibmFpbDogdGV4dCgndGh1bWJuYWlsJyksXG4gIGNyZWF0ZWRfYXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcpLmRlZmF1bHROb3coKS5ub3ROdWxsKCksXG4gIHVwZGF0ZWRfYXQ6IHRpbWVzdGFtcCgndXBkYXRlZF9hdCcpLmRlZmF1bHROb3coKS5ub3ROdWxsKCksXG59KTsgIl0sIm5hbWVzIjpbInBnVGFibGUiLCJ0ZXh0IiwidGltZXN0YW1wIiwiYm9vbGVhbiIsImludGVnZXIiLCJ1dWlkIiwidXNlcnMiLCJpZCIsInByaW1hcnlLZXkiLCJkZWZhdWx0UmFuZG9tIiwiZW1haWwiLCJub3ROdWxsIiwidW5pcXVlIiwibmFtZSIsInBhc3N3b3JkIiwiZW1haWxfdmVyaWZpZWQiLCJkZWZhdWx0IiwiY3JlYXRlZF9hdCIsImRlZmF1bHROb3ciLCJ1cGRhdGVkX2F0Iiwic2Vzc2lvbnMiLCJ1c2VyX2lkIiwicmVmZXJlbmNlcyIsImV4cGlyZXNfYXQiLCJyZWNpcGVzIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImluZ3JlZGllbnRzIiwiaW5zdHJ1Y3Rpb25zIiwiY29va2luZ190aW1lIiwic2VydmluZ3MiLCJ0eXBlIiwidGh1bWJuYWlsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/schema.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/server-auth-helper.ts":
/*!***************************************!*\
  !*** ./src/lib/server-auth-helper.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSessionFromCookie: () => (/* binding */ getSessionFromCookie),\n/* harmony export */   validateSessionFromCookie: () => (/* binding */ validateSessionFromCookie)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-proxy */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-proxy.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! private-next-rsc-action-encryption */ \"(rsc)/./node_modules/next/dist/server/app-render/action-encryption.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/expressions/conditions.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/sql.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./schema */ \"(rsc)/./src/lib/schema.ts\");\n/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! private-next-rsc-action-validate */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js\");\n/* __next_internal_action_entry_do_not_use__ {\"c2a916d9a71ef6ffab200f9a6f051469bc9748c5\":\"validateSessionFromCookie\",\"e0440db993048e983f68ace5b4d23f7c53398d11\":\"getSessionFromCookie\"} */ \n\n\n\n\n\n/**\n * Get session data from the session cookie\n * For server-side use only\n */ async function getSessionFromCookie() {\n    try {\n        // Get the session token from cookies\n        const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies)();\n        const sessionToken = cookieStore.get(\"better-auth.session_token\")?.value;\n        if (!sessionToken) {\n            console.log(\"No session token found in cookies\");\n            return null;\n        }\n        console.log(\"Session token found:\", sessionToken);\n        // Split and decode the token parts (format is [id].[signature])\n        const [sessionId] = sessionToken.split(\".\");\n        if (!sessionId) {\n            console.log(\"Invalid session token format\");\n            return null;\n        }\n        // Query the sessions table directly using the session ID - avoid using created_at\n        const sessionResults = await _db__WEBPACK_IMPORTED_MODULE_3__.db.select({\n            id: _schema__WEBPACK_IMPORTED_MODULE_4__.sessions.id,\n            userId: _schema__WEBPACK_IMPORTED_MODULE_4__.sessions.user_id,\n            expiresAt: _schema__WEBPACK_IMPORTED_MODULE_4__.sessions.expires_at\n        }).from(_schema__WEBPACK_IMPORTED_MODULE_4__.sessions).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_schema__WEBPACK_IMPORTED_MODULE_4__.sessions.id, sessionId)).limit(1);\n        if (sessionResults.length === 0) {\n            return null;\n        }\n        const session = sessionResults[0];\n        // Check if the session has expired\n        if (new Date(session.expiresAt) < new Date()) {\n            return null;\n        }\n        // Get the user associated with the session\n        const userResults = await _db__WEBPACK_IMPORTED_MODULE_3__.db.select().from(_schema__WEBPACK_IMPORTED_MODULE_4__.users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_schema__WEBPACK_IMPORTED_MODULE_4__.users.id, session.userId)).limit(1);\n        if (userResults.length === 0) {\n            return null;\n        }\n        const user = userResults[0];\n        // Return the session data in the format expected by the application\n        return {\n            user: {\n                id: user.id,\n                email: user.email,\n                name: user.name,\n                image: null\n            }\n        };\n    } catch (error) {\n        console.error(\"Error getting session from cookie:\", error);\n        return null;\n    }\n}\n/**\n * Validate session from cookie data\n * For server-side use only\n */ async function validateSessionFromCookie() {\n    try {\n        const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies)();\n        const sessionToken = cookieStore.get(\"better-auth.session_token\");\n        if (!sessionToken?.value) {\n            return {\n                isAuthenticated: false,\n                user: null\n            };\n        }\n        // Parse session token to get session ID\n        const [sessionId] = sessionToken.value.split(\".\");\n        if (!sessionId) {\n            return {\n                isAuthenticated: false,\n                user: null\n            };\n        }\n        // Check if session exists and is valid - don't use created_at since it might not exist\n        const sessionResults = await _db__WEBPACK_IMPORTED_MODULE_3__.db.execute(drizzle_orm__WEBPACK_IMPORTED_MODULE_6__.sql`\n      SELECT s.id, s.user_id, s.expires_at, u.id as user_id, u.email, u.name, u.image\n      FROM sessions s\n      JOIN users u ON s.user_id = u.id\n      WHERE s.id = ${sessionId}\n        AND s.expires_at > NOW()\n      LIMIT 1\n    `);\n        if (!sessionResults[0]) {\n            return {\n                isAuthenticated: false,\n                user: null\n            };\n        }\n        const sessionData = sessionResults[0];\n        return {\n            isAuthenticated: true,\n            user: {\n                id: sessionData.user_id,\n                email: sessionData.email,\n                name: sessionData.name || null,\n                image: sessionData.image || null\n            }\n        };\n    } catch (error) {\n        console.error(\"Error validating session from cookie:\", error);\n        return {\n            isAuthenticated: false,\n            user: null\n        };\n    }\n}\n\n(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_7__.ensureServerEntryExports)([\n    getSessionFromCookie,\n    validateSessionFromCookie\n]);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"e0440db993048e983f68ace5b4d23f7c53398d11\", getSessionFromCookie);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"c2a916d9a71ef6ffab200f9a6f051469bc9748c5\", validateSessionFromCookie);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU1RLGNBQWN0QixjQUFjLENBQUMsRUFBRTtRQUVyQyxPQUFPO1lBQ0xvQixpQkFBaUI7WUFDakJOLE1BQU07Z0JBQ0paLElBQUlvQixZQUFZbEIsT0FBTztnQkFDdkJXLE9BQU9PLFlBQVlQLEtBQUs7Z0JBQ3hCQyxNQUFNTSxZQUFZTixJQUFJLElBQUk7Z0JBQzFCQyxPQUFPSyxZQUFZTCxLQUFLLElBQUk7WUFDOUI7UUFDRjtJQUNGLEVBQUUsT0FBT0MsT0FBTztRQUNkdEIsUUFBUXNCLEtBQUssQ0FBQyx5Q0FBeUNBO1FBQ3ZELE9BQU87WUFBRUUsaUJBQWlCO1lBQU9OLE1BQU07UUFBSztJQUM5QztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVjaXBlLWtlZXBlci8uL3NyYy9saWIvc2VydmVyLWF1dGgtaGVscGVyLnRzP2UyZDYiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzZXJ2ZXInO1xuXG5pbXBvcnQgeyBlcSwgc3FsIH0gZnJvbSBcImRyaXp6bGUtb3JtXCI7XG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSBcIm5leHQvaGVhZGVyc1wiO1xuaW1wb3J0IHsgZGIgfSBmcm9tIFwiLi9kYlwiO1xuaW1wb3J0IHsgc2Vzc2lvbnMsIHVzZXJzIH0gZnJvbSBcIi4vc2NoZW1hXCI7XG5cbi8qKlxuICogVHlwZXMgZm9yIHNlcnZlci1zaWRlIGF1dGhlbnRpY2F0aW9uXG4gKi9cbmV4cG9ydCB0eXBlIFNlcnZlckF1dGhVc2VyID0ge1xuICBpZDogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmcgfCBudWxsO1xuICBpbWFnZTogc3RyaW5nIHwgbnVsbDtcbn07XG5cbi8qKlxuICogR2V0IHNlc3Npb24gZGF0YSBmcm9tIHRoZSBzZXNzaW9uIGNvb2tpZVxuICogRm9yIHNlcnZlci1zaWRlIHVzZSBvbmx5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXNzaW9uRnJvbUNvb2tpZSgpIHtcbiAgdHJ5IHtcbiAgICAvLyBHZXQgdGhlIHNlc3Npb24gdG9rZW4gZnJvbSBjb29raWVzXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBjb29raWVzKCk7XG4gICAgY29uc3Qgc2Vzc2lvblRva2VuID0gY29va2llU3RvcmUuZ2V0KCdiZXR0ZXItYXV0aC5zZXNzaW9uX3Rva2VuJyk/LnZhbHVlO1xuICAgIFxuICAgIGlmICghc2Vzc2lvblRva2VuKSB7XG4gICAgICBjb25zb2xlLmxvZygnTm8gc2Vzc2lvbiB0b2tlbiBmb3VuZCBpbiBjb29raWVzJyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnU2Vzc2lvbiB0b2tlbiBmb3VuZDonLCBzZXNzaW9uVG9rZW4pO1xuICAgIFxuICAgIC8vIFNwbGl0IGFuZCBkZWNvZGUgdGhlIHRva2VuIHBhcnRzIChmb3JtYXQgaXMgW2lkXS5bc2lnbmF0dXJlXSlcbiAgICBjb25zdCBbc2Vzc2lvbklkXSA9IHNlc3Npb25Ub2tlbi5zcGxpdCgnLicpO1xuICAgIFxuICAgIGlmICghc2Vzc2lvbklkKSB7XG4gICAgICBjb25zb2xlLmxvZygnSW52YWxpZCBzZXNzaW9uIHRva2VuIGZvcm1hdCcpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8vIFF1ZXJ5IHRoZSBzZXNzaW9ucyB0YWJsZSBkaXJlY3RseSB1c2luZyB0aGUgc2Vzc2lvbiBJRCAtIGF2b2lkIHVzaW5nIGNyZWF0ZWRfYXRcbiAgICBjb25zdCBzZXNzaW9uUmVzdWx0cyA9IGF3YWl0IGRiXG4gICAgICAuc2VsZWN0KHtcbiAgICAgICAgaWQ6IHNlc3Npb25zLmlkLFxuICAgICAgICB1c2VySWQ6IHNlc3Npb25zLnVzZXJfaWQsXG4gICAgICAgIGV4cGlyZXNBdDogc2Vzc2lvbnMuZXhwaXJlc19hdFxuICAgICAgfSlcbiAgICAgIC5mcm9tKHNlc3Npb25zKVxuICAgICAgLndoZXJlKGVxKHNlc3Npb25zLmlkLCBzZXNzaW9uSWQpKVxuICAgICAgLmxpbWl0KDEpO1xuICAgIFxuICAgIGlmIChzZXNzaW9uUmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzZXNzaW9uID0gc2Vzc2lvblJlc3VsdHNbMF07XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHNlc3Npb24gaGFzIGV4cGlyZWRcbiAgICBpZiAobmV3IERhdGUoc2Vzc2lvbi5leHBpcmVzQXQpIDwgbmV3IERhdGUoKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8vIEdldCB0aGUgdXNlciBhc3NvY2lhdGVkIHdpdGggdGhlIHNlc3Npb25cbiAgICBjb25zdCB1c2VyUmVzdWx0cyA9IGF3YWl0IGRiXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5mcm9tKHVzZXJzKVxuICAgICAgLndoZXJlKGVxKHVzZXJzLmlkLCBzZXNzaW9uLnVzZXJJZCkpXG4gICAgICAubGltaXQoMSk7XG4gICAgXG4gICAgaWYgKHVzZXJSZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHVzZXIgPSB1c2VyUmVzdWx0c1swXTtcbiAgICBcbiAgICAvLyBSZXR1cm4gdGhlIHNlc3Npb24gZGF0YSBpbiB0aGUgZm9ybWF0IGV4cGVjdGVkIGJ5IHRoZSBhcHBsaWNhdGlvblxuICAgIHJldHVybiB7XG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICBpbWFnZTogbnVsbCxcbiAgICAgIH1cbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgc2Vzc2lvbiBmcm9tIGNvb2tpZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBzZXNzaW9uIGZyb20gY29va2llIGRhdGFcbiAqIEZvciBzZXJ2ZXItc2lkZSB1c2Ugb25seVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVTZXNzaW9uRnJvbUNvb2tpZSgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGNvb2tpZXMoKTtcbiAgICBjb25zdCBzZXNzaW9uVG9rZW4gPSBjb29raWVTdG9yZS5nZXQoJ2JldHRlci1hdXRoLnNlc3Npb25fdG9rZW4nKTtcbiAgICBcbiAgICBpZiAoIXNlc3Npb25Ub2tlbj8udmFsdWUpIHtcbiAgICAgIHJldHVybiB7IGlzQXV0aGVudGljYXRlZDogZmFsc2UsIHVzZXI6IG51bGwgfTtcbiAgICB9XG4gICAgXG4gICAgLy8gUGFyc2Ugc2Vzc2lvbiB0b2tlbiB0byBnZXQgc2Vzc2lvbiBJRFxuICAgIGNvbnN0IFtzZXNzaW9uSWRdID0gc2Vzc2lvblRva2VuLnZhbHVlLnNwbGl0KCcuJyk7XG4gICAgXG4gICAgaWYgKCFzZXNzaW9uSWQpIHtcbiAgICAgIHJldHVybiB7IGlzQXV0aGVudGljYXRlZDogZmFsc2UsIHVzZXI6IG51bGwgfTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgc2Vzc2lvbiBleGlzdHMgYW5kIGlzIHZhbGlkIC0gZG9uJ3QgdXNlIGNyZWF0ZWRfYXQgc2luY2UgaXQgbWlnaHQgbm90IGV4aXN0XG4gICAgY29uc3Qgc2Vzc2lvblJlc3VsdHMgPSBhd2FpdCBkYi5leGVjdXRlKHNxbGBcbiAgICAgIFNFTEVDVCBzLmlkLCBzLnVzZXJfaWQsIHMuZXhwaXJlc19hdCwgdS5pZCBhcyB1c2VyX2lkLCB1LmVtYWlsLCB1Lm5hbWUsIHUuaW1hZ2VcbiAgICAgIEZST00gc2Vzc2lvbnMgc1xuICAgICAgSk9JTiB1c2VycyB1IE9OIHMudXNlcl9pZCA9IHUuaWRcbiAgICAgIFdIRVJFIHMuaWQgPSAke3Nlc3Npb25JZH1cbiAgICAgICAgQU5EIHMuZXhwaXJlc19hdCA+IE5PVygpXG4gICAgICBMSU1JVCAxXG4gICAgYCk7XG4gICAgXG4gICAgaWYgKCFzZXNzaW9uUmVzdWx0c1swXSkge1xuICAgICAgcmV0dXJuIHsgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSwgdXNlcjogbnVsbCB9O1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzZXNzaW9uRGF0YSA9IHNlc3Npb25SZXN1bHRzWzBdIGFzIGFueTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgaXNBdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogc2Vzc2lvbkRhdGEudXNlcl9pZCxcbiAgICAgICAgZW1haWw6IHNlc3Npb25EYXRhLmVtYWlsLFxuICAgICAgICBuYW1lOiBzZXNzaW9uRGF0YS5uYW1lIHx8IG51bGwsXG4gICAgICAgIGltYWdlOiBzZXNzaW9uRGF0YS5pbWFnZSB8fCBudWxsXG4gICAgICB9XG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB2YWxpZGF0aW5nIHNlc3Npb24gZnJvbSBjb29raWU6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IGlzQXV0aGVudGljYXRlZDogZmFsc2UsIHVzZXI6IG51bGwgfTtcbiAgfVxufSAiXSwibmFtZXMiOlsiZXEiLCJzcWwiLCJjb29raWVzIiwiZGIiLCJzZXNzaW9ucyIsInVzZXJzIiwiZ2V0U2Vzc2lvbkZyb21Db29raWUiLCJjb29raWVTdG9yZSIsInNlc3Npb25Ub2tlbiIsImdldCIsInZhbHVlIiwiY29uc29sZSIsImxvZyIsInNlc3Npb25JZCIsInNwbGl0Iiwic2Vzc2lvblJlc3VsdHMiLCJzZWxlY3QiLCJpZCIsInVzZXJJZCIsInVzZXJfaWQiLCJleHBpcmVzQXQiLCJleHBpcmVzX2F0IiwiZnJvbSIsIndoZXJlIiwibGltaXQiLCJsZW5ndGgiLCJzZXNzaW9uIiwiRGF0ZSIsInVzZXJSZXN1bHRzIiwidXNlciIsImVtYWlsIiwibmFtZSIsImltYWdlIiwiZXJyb3IiLCJ2YWxpZGF0ZVNlc3Npb25Gcm9tQ29va2llIiwiaXNBdXRoZW50aWNhdGVkIiwiZXhlY3V0ZSIsInNlc3Npb25EYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/server-auth-helper.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/drizzle-orm","vendor-chunks/postgres","vendor-chunks/jose","vendor-chunks/next-auth","vendor-chunks/openid-client","vendor-chunks/@babel","vendor-chunks/oauth","vendor-chunks/@auth","vendor-chunks/@panva","vendor-chunks/yallist","vendor-chunks/preact-render-to-string","vendor-chunks/oidc-token-hash","vendor-chunks/bcryptjs","vendor-chunks/preact","vendor-chunks/object-hash","vendor-chunks/lru-cache","vendor-chunks/cookie"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclient-auth%2F%5B...action%5D%2Froute&page=%2Fapi%2Fclient-auth%2F%5B...action%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclient-auth%2F%5B...action%5D%2Froute.ts&appDir=%2FUsers%2Fzizhengdong%2FDocuments%2FGitHub%2Fcs5356-final%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fzizhengdong%2FDocuments%2FGitHub%2Fcs5356-final&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();